{"ast":null,"code":"// import * as grpcWeb from \"grpc-web\";\n\nimport { DataServiceClient } from \"../generated/DocumentServiceClientPb\";\nimport { UpdateRequest } from \"../generated/document_pb\";\nexport class GrpcClient {\n  constructor(host) {\n    this.dataService = void 0;\n    this.dataService = new DataServiceClient(host);\n  }\n  startStream(clientId, onMessage) {\n    console.log(\"start stream\");\n    const request = new UpdateRequest();\n    request.setClientId(clientId);\n    const call = this.dataService.getUpdates(request, {});\n    call.on(\"status\", status => {\n      console.log(\"status\", statsu);\n    });\n    call.on(\"data\", response => {\n      console.log(response);\n      onMessage(response.getData());\n    });\n    return call;\n  }\n}","map":{"version":3,"names":["DataServiceClient","UpdateRequest","GrpcClient","constructor","host","dataService","startStream","clientId","onMessage","console","log","request","setClientId","call","getUpdates","on","status","statsu","response","getData"],"sources":["/Users/luisadrianferreyra/Dev/laferreyra.github.io/projects/collaborative-document-system/frontend/src/services/grpcClient.ts"],"sourcesContent":["// import * as grpcWeb from \"grpc-web\";\nimport { ClientReadableStream, Status } from \"grpc-web\";\nimport { DataServiceClient } from \"../generated/DocumentServiceClientPb\";\nimport { UpdateRequest, UpdateResponse } from \"../generated/document_pb\";\n\nexport class GrpcClient {\n  private dataService: DataServiceClient;\n\n  constructor(host: string) {\n    this.dataService = new DataServiceClient(host);\n  }\n\n  startStream(\n    clientId: string,\n    onMessage: (message: string) => void\n  ): ClientReadableStream<UpdateResponse> {\n    console.log(\"start stream\");\n    const request = new UpdateRequest();\n    request.setClientId(clientId);\n\n    const call = this.dataService.getUpdates(request, {});\n    call.on(\"status\", (status: Status) => {\n      console.log(\"status\", statsu);\n    });\n    call.on(\"data\", (response: UpdateResponse) => {\n      console.log(response);\n      onMessage(response.getData());\n    });\n\n    return call;\n  }\n}\n"],"mappings":"AAAA;;AAEA,SAASA,iBAAiB,QAAQ,sCAAsC;AACxE,SAASC,aAAa,QAAwB,0BAA0B;AAExE,OAAO,MAAMC,UAAU,CAAC;EAGtBC,WAAWA,CAACC,IAAY,EAAE;IAAA,KAFlBC,WAAW;IAGjB,IAAI,CAACA,WAAW,GAAG,IAAIL,iBAAiB,CAACI,IAAI,CAAC;EAChD;EAEAE,WAAWA,CACTC,QAAgB,EAChBC,SAAoC,EACE;IACtCC,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;IAC3B,MAAMC,OAAO,GAAG,IAAIV,aAAa,CAAC,CAAC;IACnCU,OAAO,CAACC,WAAW,CAACL,QAAQ,CAAC;IAE7B,MAAMM,IAAI,GAAG,IAAI,CAACR,WAAW,CAACS,UAAU,CAACH,OAAO,EAAE,CAAC,CAAC,CAAC;IACrDE,IAAI,CAACE,EAAE,CAAC,QAAQ,EAAGC,MAAc,IAAK;MACpCP,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEO,MAAM,CAAC;IAC/B,CAAC,CAAC;IACFJ,IAAI,CAACE,EAAE,CAAC,MAAM,EAAGG,QAAwB,IAAK;MAC5CT,OAAO,CAACC,GAAG,CAACQ,QAAQ,CAAC;MACrBV,SAAS,CAACU,QAAQ,CAACC,OAAO,CAAC,CAAC,CAAC;IAC/B,CAAC,CAAC;IAEF,OAAON,IAAI;EACb;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}