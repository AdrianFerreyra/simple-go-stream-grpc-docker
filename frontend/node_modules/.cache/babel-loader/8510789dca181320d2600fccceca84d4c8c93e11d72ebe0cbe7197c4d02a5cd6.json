{"ast":null,"code":"// import * as grpcWeb from \"grpc-web\";\n\nimport { DataServiceClient } from \"../generated/DocumentServiceClientPb\";\nimport { UpdateRequest } from \"../generated/document_pb\";\nexport class GrpcClient {\n  constructor(host) {\n    this.dataService = void 0;\n    this.dataService = new DataServiceClient(host);\n  }\n  startStream(clientId, onMessage) {\n    const request = new UpdateRequest();\n    request.setClientId(clientId);\n    const call = this.dataService.getUpdates(request, {});\n    call.on(\"data\", response => {\n      onMessage(response.getData());\n    });\n    return call;\n  }\n}","map":{"version":3,"names":["DataServiceClient","UpdateRequest","GrpcClient","constructor","host","dataService","startStream","clientId","onMessage","request","setClientId","call","getUpdates","on","response","getData"],"sources":["/Users/luisadrianferreyra/Dev/laferreyra.github.io/projects/collaborative-document-system/frontend/src/services/grpcClient.ts"],"sourcesContent":["// import * as grpcWeb from \"grpc-web\";\nimport { ClientReadableStream, Status } from \"grpc-web\";\nimport { DataServiceClient } from \"../generated/DocumentServiceClientPb\";\nimport { UpdateRequest, UpdateResponse } from \"../generated/document_pb\";\n\nexport class GrpcClient {\n  private dataService: DataServiceClient;\n\n  constructor(host: string) {\n    this.dataService = new DataServiceClient(host);\n  }\n\n  startStream(\n    clientId: string,\n    onMessage: (message: string) => void\n  ): ClientReadableStream<UpdateResponse> {\n    const request = new UpdateRequest();\n    request.setClientId(clientId);\n\n    const call = this.dataService.getUpdates(request, {});\n    call.on(\"data\", (response: UpdateResponse) => {\n      onMessage(response.getData());\n    });\n\n    return call;\n  }\n}\n"],"mappings":"AAAA;;AAEA,SAASA,iBAAiB,QAAQ,sCAAsC;AACxE,SAASC,aAAa,QAAwB,0BAA0B;AAExE,OAAO,MAAMC,UAAU,CAAC;EAGtBC,WAAWA,CAACC,IAAY,EAAE;IAAA,KAFlBC,WAAW;IAGjB,IAAI,CAACA,WAAW,GAAG,IAAIL,iBAAiB,CAACI,IAAI,CAAC;EAChD;EAEAE,WAAWA,CACTC,QAAgB,EAChBC,SAAoC,EACE;IACtC,MAAMC,OAAO,GAAG,IAAIR,aAAa,CAAC,CAAC;IACnCQ,OAAO,CAACC,WAAW,CAACH,QAAQ,CAAC;IAE7B,MAAMI,IAAI,GAAG,IAAI,CAACN,WAAW,CAACO,UAAU,CAACH,OAAO,EAAE,CAAC,CAAC,CAAC;IACrDE,IAAI,CAACE,EAAE,CAAC,MAAM,EAAGC,QAAwB,IAAK;MAC5CN,SAAS,CAACM,QAAQ,CAACC,OAAO,CAAC,CAAC,CAAC;IAC/B,CAAC,CAAC;IAEF,OAAOJ,IAAI;EACb;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}